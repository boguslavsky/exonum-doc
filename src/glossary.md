# Глоссарий

В документации Exonum используются определенные термины для описания ключевых
понятий в Exonum. На данной странице собраны такие термины.

!!! note "Примечание"
    Все термины здесь определены с учетом особенностей Exonum. Например, термин
    [*Транзакция*](#_32) описывает, как транзакции работают в Exonum.
    В сущности, транзакция может иметь много других значений, но они не
    рассматриваются в этом документе.

## Администратор

Лицо, участвующее в создании [блоков](#_5) и установлении правил в блокчейне.

В [приватных блокчейнах](#_25), администраторы известны, они
указаны в протоколе блокчейна. Администраторы настраивают и управляют
[узлами-валидаторами](#_7) в сети, а также согласовывают изменения в
правилах обработки транзакций.

!!! note "Пример"
    Рассмотрим блокчейн Exonum, который реализует публичный реестр в конкретной
    стране. В этом случае администратор блокчейна это правительственное
    учреждение или группа учреждений, которым поручено вести публичные реестры
    согласно закону.

Напротив, в публичных блокчейнах (например, Биткоин) участники не указаны в
протоколе блокчейна. Валидаторы в таких сетях обычно анонимные.

## Аудитор

**Также** узел-аудитор

[Полный узел](#_24) в сети блокчейн, который не участвует в создании
новых [блоков](#_5), а выполняет непрерывный аудит всех транзакций в сети.
Аудиторы идентифицируются с помощью [открытого ключа](#_23) в сети
блокчейн. В отличие от [валидаторов](#_7),
добавление аудиторов не приводит к задержкам в обработке транзакций и не снижает
пропускную способность, поэтому в одной и той же сети блокчейн могут быть сотни
аудиторов.

!!! note "Пример"
    Рассмотрим блокчейн Exonum, который реализует публичный реестр в
    определенной стране. В этом случае узлы-аудиторы могут принадлежать
    неправительственным организациям, которые заинтересованы в мониторинге
    работы реестра.

## Аутентифицированный консенсус

Тип [консенсуса](#_18), в котором участники заранее известны и
аутентифицированы, обычно с помощью криптосистемы с открытым ключом (например,
[цифровой подписью](#_35)). Exonum использует алгоритм
аутентифицированного консенсуса, немного похожий на [PBFT][pbft], чтобы система
была [децентрализованной](#_13) и выдерживала атаки
[византийских](#_8) [валидаторов](#_7).

## Блок

Упорядоченный список [транзакций](#_32) в блокчейне, аутентифицированный
по меньшей мере 2/3 [валидаторов](#_7), и некоторой дополнительной
информацией (такой, как [хеш](#_33) предыдущего блока и хеш
[состояния блокчейна](#_30) после добавления транзакций в блок).
Компактная форма блока, в которой транзакции заменяются корнем их
[дерева Меркла](#_12), используется для связи с
[легкими клиентами](#_21).

## Блокчейн

[Распределенный реестр](#_26), который использует систему
[связи хешей][wiki:linked-ts] для достижения неизменяемости журнала транзакций,
а также использует и другие криптографические инструменты для повышения
прозрачности системы.
Транзакции в блокчейне сгруппированы в [блоки](#_5), чтобы облегчить аудит с
помощью [легких клиентов](#_21).

В то время как целью распределенного реестра является [децентрализованное](#_13)
управление данными, одной из целей блокчейна является достижение прозрачности
действий [администраторов блокчейна](#_2) и аудитируемости системы
третьими лицами (например, внутренними и внешними аудиторами, регуляторами и
конечными пользователями системы).

## Валидатор

[Полный узел](#_24) в сети блокчейн с правом участия в
[алгоритме консенсуса](#_18) для создания [блоков](#_5). В Exonum
валидаторы идентифицируются с помощью
[глобальной конфигурации](#_10), которая содержит открытые
ключи всех валидаторов в сети. Набор валидаторов можно поменять, изменив
глобальную конфигурацию. Обычно набор валидаторов достаточно мал и состоит из
4-15 узлов.

## Византийский узел

Узел в распределенной сети, который действует вне [алгоритма консенсуса](#_18).
Византийское поведение может быть вызвано вредоносными намерениями, сбоями в
работе программного/аппаратного обеспечения или проблемами сетевого
подключения.

Алгоритмы консенсуса, способные противостоять византийскому поведению,
называются византийскими. Exonum использует византийский алгоритм консенсуса,
похожий на [PBFT][pbft]. Византийский алгоритм консенсуса Exonum способен
выдерживать до 1/3 византийских [валидаторов](#_7) &mdash; максимальный
возможный показатель в формате модели безопасности, которую использует
Exonum.

## Генезис блок

Самый первый [блок](#_5) в блокчейне. Генезис блок не связывается с хешем
предыдущего блока в блокчейне, взамен эта связь заполняется хешем-заполнителем
(32 байта нулей). Генезис блок содержит начальную
[глобальную конфигурацию](#_10) и больше никаких других
транзакций.

## Глобальная конфигурация

Часть [конфигурации](#_20), общая для всех [полных узлов](#_24).
Глобальная конфигурация является частью [состояния блокчейна](#_30).
[Ядро](#_36) определяет несколько глобальных параметров конфигурации, которые в
основном связаны с [консенсусом](#_18) и сетевыми взаимодействиями
(например, набор открытых ключей [валидаторов](#_7)).

## Двоичная сериализация

Сериализация [данных, хранящихся в блокчейне](#_34), и
[сообщений](#_29) в независимую от платформы последовательность байт в
соответствии с набором правил, определенных фреймворком Exonum. Двоичная
сериализация используется в Exonum для криптографических операций, таких как
генерация [хешей](#_33) и [цифровых подписей](#_35).
Она реализована как в [ядре](#_36), так и в [библиотеке легкого клиента](#_21).

Формат сериализации Exonum оптимизирован для обеспечения почти нулевых
затрат на десериализацию в низкоуровневых средах программирования (таких, как
Rust).

!!! tip "Совет"
    Подробнее см. [*Сериализация*](https://exonum.com/doc/architecture/serialization/).

## Дерево Меркла

**Также** дерево хешей

Структура данных на основе двоичного дерева, которая позволяет вычислять
общий [хеш](#_33) списка элементов таким образом, что любой
конкретный элемент списка привязан к общему хешу через короткую ссылку. (Эта
ссылка называется *путь Меркла* или [*доказательство Меркла*](#_14)).

Exonum использует деревья Меркла и аналогичную структуру данных для
ассоциативных массивов
(деревья Merkle [Patricia][wiki:p-tree]), чтобы собрать все
[состояния блокчейна](#_30) в единый *хеш состояния*, записанный
в [блоках](#_5), и предоставить [доказательства](#_14) для
[легких клиентов](#_21).

!!! note "Примечание"
    В криптографии дерево Меркла применяет [схему обязательств][wiki:commitment]
    к списку элементов таким образом, что размер любого раскрытия сообщения
    логарифмичен по отношению к количеству элементов в списке.

## Децентрализация

Отсутствие единой точки отказа в системе. Например, отсутствие единого
администратора, обладающего привилегиями, которые позволяют выполнять
самовольные действия.

## Доказательство Меркла

Криптографическое доказательство того, что определенные данные являются частью
[криптографического обязательства][wiki:commitment], основанного на
[деревьях Меркла](#_12) или их вариантах. Доказательство Меркла
позволяет компактно доказать, что определенные данные хранятся по указанному
ключу в [состоянии блокчейна](#_30). В то же время
доказательство не раскрывает другую информацию о состоянии и не требует
репликации всех [транзакций](#_32) блокчейн сети.

Доказательства Меркла используются в ответах Exonum на [запросы на чтение](#_16)
от [легких клиентов](#_21). Используя доказательства, клиент может
проверить подлинность ответа без необходимости связываться с несколькими
полными узлами или реплицировать все транзакции в блокчейне.

## Закрытый ключ

Закрытый ключ согласно спецификации [Ed25519][ed25519]. Каждый закрытый ключ
соответствует определенному [открытому ключу](#_23). Закрытый
ключ необходим для создания [цифровых подписей](#_35) [сообщений](#_29),
которые впоследствии могут быть сверены с сообщением и соответствующим открытым
ключом.

!!! summary "Детали реализации"
    Согласно [`libsodium`][libsodium], закрытые ключи занимают 64 байта в
    двоичной форме: 32 байта криптографического значения, используемого для
    генерации ключа, и 32 байта предварительно рассчитанного соответствующего
    открытого ключа. Последние 32 байта являются избыточными, но помогают
    ускорить вычисления.

## Запрос на чтение

[Конечная точка сервиса](#_17) которая может использоваться
для извлечения данных из [состояния блокчейна](#_30). Обычно
данные возвращаются с [доказательством](#_14) того, что данные
действительно являются частью состояния блокчейна и авторизованы большинством
[валидаторов](#_7).

## Конечная точка сервиса

Точка связи с [сервисом](#_27). Существует три вида конечных точек:

- [Транзакции](#_32) позволяют атомарно изменять состояние блокчейна;
- [Запросы на чтение](#_16) позволяют считывать данные из состояния
  блокчейна, обычно вместе с [доказательством](#_14);
- [Приватные API](#api) позволяют настраивать сервис локально.

Внешние объекты, такие как [легкие клиенты](#_21) могут обращаться к
конечным точкам через REST API. Конфигурация REST API указана в сервисе.

## Консенсус

**Также** алгоритм консенсуса

Механизм достижения согласия между узлами в сети. В контексте [блокчейна](#_6)
консенсусу необходимо противостоять ошибкам: ситуациям, когда узлы не реагируют
и/или прямо пытаются скомпрометировать работу блокчейна.

Существует два основных типа консенсуса:

- [Аутентифицированный консенсус](#_4), в котором
  участвующие узлы известны заранее. Этот тип консенсуса реализован в Exonum;
- Анонимный консенсус, в котором участники консенсуса заранее не известны. Этот
  тип консенсуса обычно используется в криптовалютах (например, Биткоин).

## Консенсусное сообщение

[Сообщение](#_29), которое генерируется [полным узлом](#_24)
согласно [алгоритму консенсуса](#_18). Валидаторы обмениваются
консенсусными сообщениями для принятия [транзакций](#_32) в блокчейн
путем создания новых [блоков](#_5).

Консенсусные сообщения включают:

- `Propose`, `Prevote` и `Precommit` сообщения, которые соответствуют 3
  фазам [алгоритма консенсуса](#_18), используемого в
  Exonum;
- Запросы, которые используются полными узлами для запроса отсутствующих данных
  у других узлов;
- Сообщения `Block`, которые используются для передачи всего блока транзакций на
  отстающий полный узел;
- Вспомогательные сообщения, такие как `Status` и `Connect`.

!!! tip "Совет"
    Дополнительную информацию см. в разделах [*Консенсус*](architecture/consensus.md)
    и [*Запросы*](https://exonum.com/doc/advanced/consensus/requests/).

## Конфигурация

Набор настраиваемых параметров, определяющих поведение [полного узла](#_24).
Конфигурация состоит из двух частей: [глобальной](#_10)
и [локальной конфигураций](#_22). Некоторые параметры
конфигурации
определяются [ядром](#_36), например, максимальное количество транзакций в
[блоке](#_5). [Сервисы](#_27) также могут определять и управлять
дополнительными параметрами конфигурации.

!!! tip "Совет"
    Дополнительную информацию см. в разделе [*Конфигурация*](https://exonum.com/doc/architecture/configuration/).

## Легкий клиент

**Также** тонкий клиент

Узел в сети блокчейн, который не реплицирует все транзакции в блокчейне, а
только некоторую их часть, в которой клиент заинтересован и/или к которой
имеет доступ. Легкие клиенты могут связываться с [полными узлами](#_24)
для [извлечения информации из блокчейна](#_16)
и создания [транзакций](#_32). [Механизм доказательств](#_14)
позволяет минимизировать фактор доверия во время общения между узлами и
клиентами и защитить клиент от целого ряда атак.

## Локальная конфигурация

Часть [конфигурации](#_20), которая является локальной для каждого
[полного узла](#_24). Локальная конфигурация не является частью
[состояния блокчейна](#_30), вместо этого она хранится как
локальный TOML файл, который считывается во время запуска узла. [Ядро](#_36)
определяет несколько локальных параметров конфигурации, таких как
[закрытый ключ](#_15), используемый для подписания
[консенсусных и сетевых сообщений](#_19), созданных узлом.

## Открытый ключ

Открытый ключ согласно спецификации [Ed25519][ed25519]. Открытые ключи
используются для проверки [цифровых подписей](#_35) [сообщений](#_29).
Открытый ключ может быть связан с реальной личностью. Например, открытые ключи,
используемые в [консенсусе](#_18), привязаны к определенным
[валидаторам](#_7),
так как предполагается, что только определенный валидатор знает соответствующий
[закрытый ключ](#_15).

!!! summary "Детали реализации"
    Согласно [`libsodium`][libsodium], открытые ключи занимают 32 байта в
    двоичной форме.

## Полный узел

**Также** одноранговый узел

Узел в сети блокчейн, который реплицирует все транзакции в блокчейне и,
следовательно, имеет локальную копию всего [состояния блокчейна](#_30).
В Exonum есть 2 категории полных узлов: [валидаторы](#_7)
и [аудиторы](#_3).

## Приватный API

[Конечная точка сервиса](#_17), которая может использоваться
для администрирования локального экземпляра сервиса. Например, приватный API
может использоваться для изменения локальной конфигурации сервиса.

## Приватный блокчейн

Блокчейн, в котором [участники](#_2) представляют собой ограниченный
набор сущностей с установленными реальными личностями. Соответственно,
[узлы-валидаторы](#_7) в приватном блокчейне немногочисленны и
аутентифицируются с помощью криптосистемы с открытым ключом.

Приватные блокчейны обычно используют вариации
[аутентифицированного консенсуса](#_4).

## Распределенный реестр

Распределенная система, которая хранит полный журнал [транзакций](#_32)
для всех операций в системе, так что любая часть данных в системе имеет
проверяемый аудиторский след. Все транзакции аутентифицируются, как правило,
с помощью [криптосистемы с открытым ключом][wiki:pkc]
используемой вместе с некоторой формой временных печатей для обеспечения
[неотказуемости][wiki:non-rep].

!!! note "Примечание"
    В общем распределенном реестре аудиторский след может быть разбросан по
    всем участникам системы. Таким образом, может быть трудно проверить
    согласованность всей системы.

[Блокчейны](#_6) являются особым видом распределенных реестров с упором
на аудитируемость и прозрачность деятельности [администраторов](#_2).

## Сервис

Основная точка расширения фреймворка Exonum, аналогичная в своей сущности
веб-сервисам. Сервисы определяют всю логику обработки [транзакций](#_32)
в любом блокчейне Exonum.

Внешне сервис представляет собой набор [конечных точек](#_17),
которые позволяют манипулировать данными [состояния блокчейна](#_30)
и извлекать их, возможно, вместе с [доказательствами](#_14).
По сути, сервис может определять различные сущности, включая схему [таблиц](#_31),
[настраиваемые параметры](#_20) и т.д.

!!! tip "Совет"
    Дополнительные сведения см. в разделе [*Сервисы*](architecture/services.md).

## Сериализация

Процесс преобразования структур данных Exonum в независимое от языка
программирования представление. Exonum определяет правила (де)сериализации для
[хранимых типов данных](#_34) и [сообщений](#_29).
Каждый из них может быть преобразован из/в 2 представления:
[двоичный](#_11) и [JSON](#json).

## Сериализация JSON

Сериализация [данных, хранящихся в блокчейне](#_34) и
[сообщений](#_29) в JSON. Сериализация JSON используется в Exonum для
[конечных точек сервисов](#_17). Она реализована как в
[ядре](#_36), так и в [библиотеке легкого клиента](#_21).

## Сообщение

Подписанные [цифровой подписью](#_35) данные, которые передаются
через сеть Exonum. Существует два основных вида сообщений:

- [Консенсусные сообщения](#_19) используются среди полных
  узлов в ходе [алгоритма консенсуса](#_18);
- [Транзакции](#_32) используются для изменения
  [состояния блокчейна](#_30) и обычно поступают от
  [внешних клиентов](#_21).

## Состояние блокчейна

Фиксированное состояние, которое хранится каждым [полным узлом](#_24) в
сети блокчейн, и к которому применяются [транзакции](#_32).
[Алгоритм консенсуса](#_18) гарантирует, что состояние блокчейна (а не
только журнала транзакций) идентично для всех полных узлов.

В Exonum состояние блокчейна реализуется как хранилище типа ключ-значение.
Оно реализовано с помощью [RocksDB][rocksdb]. Части хранилища соответствуют
[таблицам](#_31), используемым [ядром](#_36) и [сервисами](#_27).

## Таблица

Структурированный набор данных (например, ассоциативный массив, набор или
список), который
обеспечивает высокоуровневую абстракцию поверх
[состояния блокчейна](#_30). Таблицы используются
[сервисами](#_27) для упрощения управления данными. Кроме того, некоторые
типы таблиц позволяют эффективно вычислять
[доказательства Меркла](#_14) для элементов таблицы.

## Транзакция

Атомарный патч, примененный к [состоянию блокчейна](#_30),
который удовлетворяет критериям [ACID][wiki:acid]. Транзакции аутентифицируются
с помощью [цифровых подписей с открытым ключом](#_35),
т.е. авторство каждой транзакции известно и не может быть легко подменено.
Транзакции могут быть сгенерированы различными объектами в сети блокчейн,
например, [легкими клиентами](#_21).

Транзакции упорядочены и собираются в [блоки](#_5) в ходе
[алгоритма консенсуса](#_18). Таким образом, транзакции применяются в
одинаковом порядке на всех [полных узлах](#_24) в сети блокчейн.

Транзакции в Exonum являются подтипом [конечных точек сервисов](#_17).
Все транзакции строятся по шаблонам и определяются внутри [сервисов](#_27),
аналогично [хранимым процедурам][mysql-stored] в системах управления базами
данных. Конечные точки транзакции обычно задают определенные правила проверки,
такие как валидация цифровой подписи в транзакции. Если правила не выполняются
для конкретной транзакции, она не изменяет состояние блокчейна, но все равно
может быть записана в журнале транзакций.

!!! tip "Совет"
    Подробнее см. [*Транзакции*](architecture/transactions.md).

## Хеш

**Также** криптографический хеш

[SHA-256][sha-256] [криптографический хеш][wiki:hash] определенных данных.
Exonum использует хеши как уникальные идентификаторы [транзакций](#_32).
Хеши также используются для создания [деревьев Меркла](#_12) и их
вариантов.

!!! summary "Детали реализации"
    Хеши SHA-256 занимают 32 байта в двоичной форме. Exonum использует
    [`sodiumoxide`][sodiumoxide]
    для расчета хешей на [полных узлах](#_24) и [sha.js][sha.js] для
    аналогичных операций на [легких клиентах](#_21).

## Хранимый тип данных

Тип данных, который может храниться как значение в
[в хранилище Exonum](#_30). Хранимые типы
данных используют логику [двоичной сериализации](#_11) для
преобразования данных в независимое от платформы представление.

!!! tip "Совет"
    Подробнее см. в разделе [*Хранилище*](https://exonum.com/doc/architecture/storage/).

## Цифровая подпись

**Также** подпись

Цифровая подпись с открытым ключом в эллиптической криптографии [Ed25519][Ed25519].
Подпись сообщения доказывает, что подписавший знает конкретный
закрытый ключ, соответствующий общедоступному
открытому ключу. Подпись может быть сверена с этим открытым
ключом и подписанным сообщением, обеспечивая при этом *достоверность*
(т.е. факт того, что сообщение пришло от определенного источника) и
*целостность* (сообщение не изменялось после подписания) сообщения. Подписи
Ed25519 универсальны, то есть, проверяющему не требуется знать какую-либо
дополнительную информацию для проверки подписи.

!!! summary "Детали реализации"
    Цифровые подписи Ed25519 занимают 64 байта в двоичной форме. Exonum
    использует
    криптографическую Rust библиотеку [`sodiumoxide`][sodiumoxide] (обертка
    [`libsodium`][libsodium] для Rust) для создания и проверки цифровых подписей
    на [полных узлах](#_24), а [TweetNaCl.js][tweetnacl] для выполнения
    аналогичных операций на [легких клиентах](#_21).

## Ядро

В Exonum &mdash; это функционал, присутствующий во всех блокчейнах Exonum, независимо
от развернутых [сервисов](#_27), инкапсулированный в репозиторий
[**exonum**][exonum].

Например, ядро включает в себя набор системных [таблиц](#_31) (в которых,
в частности, может храниться набор всех транзакций, когда-либо совершенных в
блокчейне).

[wiki:linked-ts]: https://en.wikipedia.org/wiki/Linked_timestamping
[wiki:pkc]: https://ru.wikipedia.org/wiki/Криптосистема_с_открытым_ключом
[wiki:non-rep]: https://en.wikipedia.org/wiki/Non-repudiation
[wiki:acid]: https://ru.wikipedia.org/wiki/ACID
[rocksdb]: http://rocksdb.org
[exonum]: https://github.com/exonum/exonum/
[wiki:mt]: https://ru.wikipedia.org/wiki/Дерево_хешей
[wiki:p-tree]: https://en.wikipedia.org/wiki/Radix_tree
[wiki:commitment]: https://en.wikipedia.org/wiki/Commitment_scheme
[pbft]: http://pmg.csail.mit.edu/papers/osdi99.pdf
[mysql-stored]: https://dev.mysql.com/doc/refman/5.6/en/stored-routines.html
[sodiumoxide]: https://dnaq.github.io/sodiumoxide/sodiumoxide/index.html
[libsodium]: https://download.libsodium.org/doc/
[tweetnacl]: https://github.com/dchest/tweetnacl-js
[ed25519]: https://ed25519.cr.yp.to/
[wiki:hash]: https://ru.wikipedia.org/wiki/Криптографическая_хеш-функция
[sha-256]: http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf
[sha.js]: https://www.npmjs.com/package/sha.js
